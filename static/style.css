:root {
    --primary: #6366f1;
    --primary-hover: #4f46e5;
    --bg-light: #f8fafc;
    --card-bg: #ffffff;
    --text-main: #1e293b;
    --text-muted: #64748b;
    --productive: #10b981;
    --neutral: #6b7280;
    --waste: #ef4444;
    --border: #e2e8f0;
    --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

body.dark-mode {
    --bg-light: #0f172a;
    --card-bg: #1e293b;
    --text-main: #f1f5f9;
    --text-muted: #94a3b8;
    --border: #334155;
    --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    transition: background-color 0.3s, color 0.3s, border-color 0.3s;
}

body {
    font-family: 'Inter', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-main);
    line-height: 1.5;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    width: 100%;
}

/* Navbar */
/* Navbar */
.navbar {
    background-color: var(--card-bg);
    border-bottom: 1px solid var(--border);
    padding: 0.75rem 0;
    position: sticky;
    top: 0;
    z-index: 100;
}

.navbar .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    font-size: 1.5rem;
    font-weight: 800;
    text-decoration: none;
    color: var(--text-main);
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.logo span {
    color: var(--primary);
}

.nav-links {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.nav-links a:not(.logo) {
    text-decoration: none;
    color: var(--text-muted);
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    transition: all 0.2s ease;
    font-size: 0.9rem;
}

.nav-links a:not(.logo):hover {
    background-color: var(--bg-light);
    color: var(--primary);
}

.nav-links .btn-logout {
    color: var(--waste) !important;
    border: 1px solid transparent;
}

.nav-links .btn-logout:hover {
    background-color: #fef2f2;
    /* Light red */
    border-color: #fecaca;
}

.theme-btn {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-muted);
    font-size: 1.1rem;
    cursor: pointer;
    padding: 0.4rem;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    margin-left: 0.5rem;
    width: 36px;
    height: 36px;
}

.theme-btn:hover {
    background-color: var(--bg-light);
    color: var(--text-main);
    border-color: var(--text-muted);
}

/* Main Content */
main {
    flex: 1;
    padding: 2rem 0;
}

/* Alerts */
.alert {
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    font-weight: 500;
}

.alert-success {
    background: #d1fae5;
    color: #065f46;
    border: 1px solid #10b981;
}

.alert-danger {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #ef4444;
}

.alert-warning {
    background: #fef3c7;
    color: #92400e;
    border: 1px solid #f59e0b;
}

.alert-info {
    background: #e0f2fe;
    color: #075985;
    border: 1px solid #0ea5e9;
}

/* Auth Card */
.auth-card {
    max-width: 400px;
    margin: 4rem auto;
    background: var(--card-bg);
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: var(--shadow-lg);
    text-align: center;
}

.auth-card h2 {
    font-size: 1.875rem;
    margin-bottom: 0.5rem;
}

.auth-card p {
    color: var(--text-muted);
    margin-bottom: 2rem;
}

/* Forms */
.form-group {
    margin-bottom: 1.5rem;
    text-align: left;
}

.form-group label {
    display: block;
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: 0.5rem;
    color: var(--text-main);
}

input,
select {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--border);
    border-radius: 8px;
    font-family: inherit;
    font-size: 1rem;
    transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.btn {
    width: 100%;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.1s, opacity 0.2s;
}

.btn:active {
    transform: scale(0.98);
}

.btn-primary {
    background-color: var(--primary);
    color: white;
}

.btn-primary:hover {
    background-color: var(--primary-hover);
}

.btn-success {
    background-color: var(--productive);
    color: white;
    width: auto;
}

.btn-secondary {
    background-color: var(--neutral);
    color: white;
    width: auto;
}

.auth-footer {
    margin-top: 1.5rem;
    font-size: 0.875rem;
}

.auth-footer hide a {
    color: var(--primary);
    text-decoration: none;
    font-weight: 600;
}

/* Dashboard */
.dashboard-header {
    margin-bottom: 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.streak-badge {
    background: #fff7ed;
    border: 1px solid #fed7aa;
    padding: 0.75rem 1.25rem;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 1rem;
    box-shadow: var(--shadow);
}

.streak-icon {
    font-size: 1.5rem;
    animation: bounce 2s infinite;
}

.streak-count {
    display: block;
    font-weight: 700;
    color: #9a3412;
}

.streak-label {
    font-size: 0.75rem;
    color: #c2410c;
}

.achievements-row {
    display: flex;
    gap: 1rem;
    margin-bottom: 2.5rem;
    overflow-x: auto;
    padding-bottom: 0.5rem;
}

.badge-card {
    background: white;
    padding: 0.75rem 1.25rem;
    border-radius: 12px;
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 1rem;
    min-width: 200px;
    box-shadow: var(--shadow);
    transition: transform 0.2s;
}

.badge-card:hover {
    transform: translateY(-3px);
    border-color: var(--primary);
}

.badge-icon {
    font-size: 1.5rem;
}

.badge-text h4 {
    font-size: 0.875rem;
    margin: 0;
}

.badge-text p {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin: 0;
}

@keyframes bounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-5px);
    }
}

.date-display {
    color: var(--text-muted);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.stat-card {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: var(--shadow);
    border-top: 4px solid var(--border);
}

.stat-card.productive {
    border-top-color: var(--productive);
}

.stat-card.neutral {
    border-top-color: var(--neutral);
}

.stat-card.waste {
    border-top-color: var(--waste);
}

.stat-card.score {
    border-top-color: var(--primary);
    background: linear-gradient(to bottom, #ffffff, #f5f3ff);
    color: #1e293b !important;
}

body.dark-mode .stat-card.score {
    background: var(--card-bg);
    color: var(--text-main) !important;
}

.stat-card.score h3,
.stat-card.score .stat-value span {
    color: #64748b !important;
}

body.dark-mode .stat-card.score h3,
body.dark-mode .stat-card.score .stat-value span {
    color: var(--text-muted) !important;
}

.stat-card h3 {
    font-size: 0.875rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.025em;
    margin-bottom: 0.5rem;
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
}

.stat-value span {
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-muted);
}

/* Focus Mode */
.focus-mode-container {
    margin-bottom: 2.5rem;
}

.focus-card {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    color: #1e293b;
    /* Dark text for light mode if background fails, but wait... */
    /* The user's screenshot showed a LIGHT background.
       If the background is truly #1e293b (dark), white text IS visible.
       The fact that it's NOT visible means the background IS LIGHT.
       If the background is light, we need dark text.
       BUT the CSS says the background IS dark gradient.
       
       Hypothesis: The linear-gradient might be invalid or overridden?
       Or the user is seeing a cached version?
       
       Actually, I will force the background to be dark in dark mode, and maybe the design calls for a light focus card in light mode?
       If the user Wants it clear in light mode, and it looks white, I should probably make the text dark.
       
       Let's assume the background IS light in light mode (maybe due to some browser behavior or user edit I don't see?).
       I will set the color to dark by default, and white in dark mode?
       
       Wait, if I set color to #1e293b, it will be invisible on the dark gradient.
       
       Let's change the background to a lighter gradient for light mode so the dark text makes sense?
       OR keeps the dark gradient and ensure text is white.
       
       The USER requests "Focus mode text and timer isn't clear in light mode".
       And the screenshot shows white text on white background.
       
       I will explicitely set the background to a dark color for .focus-card to ensure it's dark.
       AND I will set the text color to white.
       
       Maybe the issue is that `color: white` is NOT applied?
       It is applied in line 438: `color: white;`.
       
       Let's try to fix the background first. Maybe the gradient colors are variables that are resolving to white?
       No, they are hex codes.
       
       Wait, look at the screenshot. The "Focus Mode" badge is visible (purple). The button is visible.
       The background is WHITE.
       
       Why?
       
       Maybe `background: linear-gradient(...)` is being overridden by `.card` styles?
       `.focus-card` likely has `.card` class too in the HTML?
       `class="card focus-card"`
       
       In CSS:
       .card { background: var(--card-bg); ... }
       .focus-card { background: linear-gradient(...); ... }
       
       If .focus-card comes AFTER .card in CSS (which it does), it should win.
       
       However, if the gradient is somehow invalid...
       
       Let's try to Force the background color.
       
       Actually, if I look at the screenshot again... it looks like the user MIGHT want a Light Focus Card in Light Mode?
       If so, I should set:
       Light Mode:
          Background: Light (e.g. #f3f4f6 or white)
          Text: Dark
       Dark Mode:
          Background: Dark Gradient
          Text: White
       
       Let's Implement THAT pattern, which is safer and likely what is happening (or desired).
    */
    background: var(--card-bg);
    /* Fallback / Default */
    color: var(--text-main);
    text-align: center;
    padding: 2.5rem;
    border: none;
    position: relative;
    overflow: hidden;
}

/* Specific styling for Dark Mode Focus Card to keep it "Premium" */
body.dark-mode .focus-card {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    color: white;
}

/* Light Mode Focus Card styling */
body:not(.dark-mode) .focus-card {
    background: linear-gradient(135deg, #e0e7ff 0%, #f3f4f6 100%);
    /* Light indigo gradient */
    color: #1e293b;
}

body:not(.dark-mode) .timer-display {
    text-shadow: none;
    /* Remove glow on light mode */
    color: #4338ca;
    /* Dark indigo for timer */
}

.focus-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
}

.focus-badge {
    background: rgba(99, 102, 241, 0.2);
    color: #e0e7ff;
    /* Lighter text for better contrast */
    padding: 0.4rem 1rem;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.1em;
    display: inline-block;
    margin-bottom: 1.5rem;
}

.timer-display {
    font-size: 5rem;
    font-weight: 800;
    font-variant-numeric: tabular-nums;
    margin-bottom: 2rem;
    text-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
}

.focus-controls {
    display: flex;
    justify-content: center;
    gap: 1rem;
    position: relative;
    z-index: 10;
}

.focus-controls .btn {
    width: auto;
    min-width: 160px;
}

.btn-outline {
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.2);
    color: white;
}

.btn-outline:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: white;
}

.session-message {
    margin-top: 1.5rem;
    font-weight: 500;
    color: #94a3b8;
    animation: pulse 2s infinite;
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.6;
    }
}

/* Insight Card */
.insight-card {
    background: #fff7ed;
    border: 1px solid #fed7aa;
    text-align: center;
    padding: 2rem;
}

.insight-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
}

.insight-card h3 {
    color: #9a3412;
    margin-bottom: 0.75rem;
}

.insight-card p {
    color: #431407;
    font-size: 1.1rem;
    margin-bottom: 1rem;
}

.insight-card strong {
    color: #ef4444;
    font-size: 1.3rem;
}

.insight-action {
    font-weight: 600;
    color: #c2410c;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.dashboard-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 2rem;
}

@media (max-width: 900px) {
    .dashboard-content {
        grid-template-columns: 1fr;
    }
}

.card {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 16px;
    box-shadow: var(--shadow);
    margin-bottom: 2rem;
}

.card h2 {
    font-size: 1.25rem;
    margin-bottom: 1.5rem;
}

.form-row {
    display: flex;
    gap: 1rem;
}

.form-row .form-group {
    flex: 1;
}

/* Table */
.table-container {
    overflow-x: auto;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th {
    text-align: left;
    padding: 1rem;
    color: var(--text-muted);
    font-size: 0.75rem;
    text-transform: uppercase;
    border-bottom: 1px solid var(--border);
}

td {
    padding: 1rem;
    border-bottom: 1px solid var(--border);
}

.badge {
    padding: 0.25rem 0.625rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
}

.badge.productive {
    background: #d1fae5;
    color: #065f46;
}

.badge.neutral {
    background: #f3f4f6;
    color: #374151;
}

.badge.waste {
    background: #fee2e2;
    color: #991b1b;
}

.text-danger {
    color: var(--waste);
    text-decoration: none;
    font-size: 0.875rem;
}

.text-danger:hover {
    text-decoration: underline;
}

.text-primary {
    color: var(--primary);
    text-decoration: none;
    font-size: 0.875rem;
}

.text-primary:hover {
    text-decoration: underline;
}

/* History */
.history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.filter-form {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.view-link {
    display: inline-block;
    margin-top: 1rem;
    color: var(--primary);
    font-size: 0.875rem;
    font-weight: 600;
    text-decoration: none;
}

/* Footer */
footer {
    padding: 2rem 0;
    text-align: center;
    border-top: 1px solid var(--border);
    background: var(--card-bg);
    margin-top: 3rem;
    font-size: 0.875rem;
    color: var(--text-muted);
}

/* Streak Notification */
.streak-notification {
    position: fixed;
    top: 80px;
    right: 20px;
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    border: 2px solid #f59e0b;
    border-radius: 12px;
    padding: 1rem 1.5rem;
    box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
    z-index: 1000;
    max-width: 400px;
    animation: slideIn 0.3s ease-out;
    transition: opacity 0.5s ease;
}

body.dark-mode .streak-notification {
    background: linear-gradient(135deg, #78350f 0%, #92400e 100%);
    border-color: #f59e0b;
    color: #fef3c7;
}

.notification-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
}

.notification-content span {
    font-weight: 600;
    font-size: 0.9rem;
    color: #92400e;
}

body.dark-mode .notification-content span {
    color: #fef3c7;
}

.notification-close {
    background: transparent;
    border: none;
    font-size: 1.2rem;
    cursor: pointer;
    color: #92400e;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    transition: background 0.2s;
    flex-shrink: 0;
}

body.dark-mode .notification-close {
    color: #fef3c7;
}

.notification-close:hover {
    background: rgba(0, 0, 0, 0.1);
}

@keyframes slideIn {
    from {
        transform: translateX(400px);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Public Banner */
.public-banner {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    color: white;
    padding: 1.5rem;
    border-radius: 16px;
    margin-bottom: 2rem;
    box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
    text-align: center;
}

.banner-content h2 {
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
}

.banner-content p {
    margin: 0;
    font-size: 1rem;
}

.banner-link {
    color: #fef3c7;
    font-weight: 700;
    text-decoration: underline;
    transition: color 0.2s;
}

.banner-link:hover {
    color: white;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .streak-notification {
        top: 70px;
        right: 10px;
        left: 10px;
        max-width: none;
    }
}